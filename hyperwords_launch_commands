export OUTPUT_DIR=/Users/i.lobov/hyperwords/data/wiki
export CORPUS=wikipedia.corpus.nodups
bash scripts/clean_corpus.sh $OUTPUT_DIR/$CORPUS > $OUTPUT_DIR/$CORPUS.clean

export CORPUS2PAIRS_OPTS="--thr 100 --win 2 --del"
pypy hyperwords/corpus2pairs.py $CORPUS2PAIRS_OPTS $OUTPUT_DIR/$CORPUS.clean > $OUTPUT_DIR/${CORPUS}_pairs_win=2
bash scripts/pairs2counts.sh $OUTPUT_DIR/${CORPUS}_pairs_win=2 > $OUTPUT_DIR/${CORPUS}_counts_win=2
python hyperwords/counts2vocab.py $OUTPUT_DIR/${CORPUS}_counts_win=2

export OUTPUT_DIR=/Users/i.lobov/hyperwords/data/wiki
export WORD2VECF_OPTS="-pow 1 -size 100 -negative 1 -threads 3 -iters 1"
export OUTPUT_NAME=sgns_d=300_win=1_neg=5_iter=1
word2vecf/word2vecf $WORD2VECF_OPTS -train $OUTPUT_DIR/wikipedia.corpus.nodups_pairs_win=1 -cvocab $OUTPUT_DIR/wikipedia.corpus.nodups_counts_win=1.words.vocab -wvocab $OUTPUT_DIR/wikipedia.corpus.nodups_counts_win=1.words.vocab -dumpcv $OUTPUT_DIR/$OUTPUT_NAME.contexts -output $OUTPUT_DIR/$OUTPUT_NAME.words
python hyperwords/text2numpy.py $OUTPUT_DIR/$OUTPUT_NAME.words
python hyperwords/text2numpy.py $OUTPUT_DIR/$OUTPUT_NAME.contexts

Systematically explore the following:
1/ Adjacency matrix - win=1, win=2 (unweighted), unweighted, weighted, weighted^t
2/ Build L - unnormalized, non-symm normalized, symm normalized
3/ Learn eigenvectors
4/ Scale embeddings - no scaling, inverse sqrt(eigenvalue) scaling by col, deepwalk scaling by col (win=2,5,10), degree scaling by row (only for L2-dist)
5/ Measure similarity - cos, L2, log L2
6/ Evaluate on tasks
+ Log timing and memory consumption

### Evaluate on word similarity task

python hyperwords/ws_eval.py SGNS /Users/i.lobov/hyperwords/data/wiki/deps testsets/ws/ws353.txt
0.613

python hyperwords/ws_eval.py SPECTRAL /Users/i.lobov/hyperwords/data/wiki/eigenscaled_d=500 testsets/ws/ws353.txt
python hyperwords/ws_eval.py SPECTRAL /Users/i.lobov/hyperwords/data/wiki/eigenscaled_d=500 testsets/ws/ws353_relatedness.txt
python hyperwords/ws_eval.py SPECTRAL /Users/i.lobov/hyperwords/data/wiki/eigenscaled_d=500 testsets/ws/ws353_similarity.txt
python hyperwords/ws_eval.py SPECTRAL /Users/i.lobov/hyperwords/data/wiki/eigenscaled_d=500 testsets/ws/radinsky_mturk.txt
python hyperwords/ws_eval.py SPECTRAL /Users/i.lobov/hyperwords/data/wiki/eigenscaled_d=500 testsets/ws/luong_rare.txt
python hyperwords/ws_eval.py SPECTRAL /Users/i.lobov/hyperwords/data/wiki/eigenscaled_d=500 testsets/ws/bruni_men.txt

python hyperwords/analogy_eval.py SPECTRAL /Users/i.lobov/hyperwords/data/wiki/eigenscaled_d=500 testsets/analogy/google.txt
python hyperwords/analogy_eval.py SPECTRAL /Users/i.lobov/hyperwords/data/wiki/eigenscaled_d=500 testsets/analogy/msr.txt

python hyperwords/analogy_eval.py SPECTRAL /Users/i.lobov/hyperwords/data/wiki/spectral_embeddings_d=300 testsets/analogy/google.txt
python hyperwords/analogy_eval.py SPECTRAL /Users/i.lobov/hyperwords/data/wiki/spectral_embeddings_d=300 testsets/analogy/msr.txt
